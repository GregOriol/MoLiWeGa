{"version":3,"sources":["main.js"],"names":["fullscreenAvailable","elem","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen","fullscreenRequest","fullscreenExit","document","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen","$","window","$body","$items","hasClass","each","i","item","$item","src","find","attr","css","vegas","isVideoCompatible","slides","slide","$a","href","test","data","video","loop","mute","push","append","$vegasContainer","get","on","e","preventDefault","removeClass","history","replaceState","location","pathname","off","vegasKeyup","this","$this","addClass","current","link","createElement","download","substring","lastIndexOf","target","click","which","trigger","slideshowStart","index","pushState","cover","delay","transitionDuration","transition","firstTransitionDuration","timer","autoplay","play","slideSettings","pause","walk","onSlideshowWalk","setTimeout","Hammer","direction","DIRECTION_LEFT","DIRECTION_RIGHT","onpopstate","hash","substr","length"],"mappings":"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","file":"main.js","sourcesContent":["$(function () {\n    var $window = $(window);\n    var $body = $('body');\n    var $items = $('.grid .item');\n\n    // Scroll to top\n    // var scrollToTopLimit = $window.height()/2;\n    // var $scrollToTop = $('.button.scroll-to-top');\n    //\n    // $window.scroll(function() {\n    //     if ($(this).scrollTop() > scrollToTopLimit) {\n    //         $scrollToTop.addClass('active');\n    //     } else {\n    //         $scrollToTop.removeClass('active');\n    //     }\n    // });\n    //\n    // $scrollToTop.click(function() {\n    //     $('html, body').animate({scrollTop: 0}, 600);\n    //\n    //     return false;\n    // });\n\n    // Table layout\n    if ($body.hasClass('table')) {\n        $items.each(function (i, item) {\n            var $item = $(item);\n\n            var src = $item.find('img').attr('src');\n            $item.find('.content').css('background-image', 'url(\"'+src+'\")');\n        });\n    }\n\n    // Slideshow\n    $.vegas.isVideoCompatible = function () {\n        // var devices = /(Android|webOS|Phone|iPad|iPod|BlackBerry|Windows Phone)/i;\n        // return !devices.test(navigator.userAgent);\n        return true;\n    };\n\n    // Preparing slides\n    var slides = [];\n    $items.each(function (i, item) {\n        var $item = $(item);\n\n        var slide = {\n            $item: $item\n        };\n\n        var $a = $item.find('a');\n        var href = $a.attr('href');\n        if (/\\.(?:mp4|mov)$/i.test(href)) {\n            slide.src = $a.data('alt');\n            slide.video = {\n                src: [\n                    href\n                ],\n                loop: false,\n                mute: false\n            };\n        } else {\n            slide.src = href;\n        }\n\n        slides.push(slide);\n    });\n\n    // Preparing container\n    $body.append('<div id=\"vegas-container\"></div>');\n    $vegasContainer = $('#vegas-container');\n\n    // Preparing controls\n    $vegasContainer.append('<span id=\"vegas-close\" class=\"vegas-control icon-cancel\"></span>');\n    $vegasContainer.append('<span id=\"vegas-prev\" class=\"vegas-control icon-left-open-big\"></span>');\n    $vegasContainer.append('<span id=\"vegas-next\" class=\"vegas-control icon-right-open-big\"></span>');\n    $vegasContainer.append('<span id=\"vegas-playpause\" class=\"vegas-control icon-play\"></span>');\n    if ($body.hasClass('download')) {\n        $vegasContainer.append('<span id=\"vegas-download\" class=\"vegas-control icon-download\"></span>');\n    }\n    if (fullscreenAvailable($vegasContainer.get(0))) {\n        $vegasContainer.append('<span id=\"vegas-fullscreen\" class=\"vegas-control icon-resize-full\"></span>');\n    }\n\n    $vegasContainer.find('#vegas-close').on('click', function(e) {\n        e.preventDefault();\n\n        $vegasContainer.vegas('pause');\n        $vegasContainer.vegas('destroy');\n        $vegasContainer.removeClass('active');\n        $body.removeClass('fixed');\n\n        // Reverting history to the page itself\n        window.history.replaceState({}, '', location.pathname);\n\n        $(document).off('keyup', vegasKeyup);\n    });\n    $vegasContainer.find('#vegas-next').on('click', function(e) {\n        e.preventDefault();\n\n        // Pause\n        $vegasContainer.vegas('pause');\n\n        $vegasContainer.vegas('next');\n    });\n    $vegasContainer.find('#vegas-prev').on('click', function(e) {\n        e.preventDefault();\n\n        // Pause\n        $vegasContainer.vegas('pause');\n\n        $vegasContainer.vegas('previous');\n    });\n    $vegasContainer.find('#vegas-playpause').on('click', function(e) {\n        e.preventDefault();\n\n        var $this = $(this);\n        if ($this.hasClass('icon-pause')) {\n            $vegasContainer.vegas('pause');\n        } else {\n            $vegasContainer.vegas('play');\n        }\n    });\n    $vegasContainer.find('#vegas-fullscreen').on('click', function(e) {\n        e.preventDefault();\n\n        var $this = $(this);\n        if ($this.hasClass('icon-resize-full')) {\n            fullscreenRequest($vegasContainer.get(0));\n            $this.removeClass('icon-resize-full');\n            $this.addClass('icon-resize-small');\n        } else {\n            fullscreenExit();\n            $this.removeClass('icon-resize-small');\n            $this.addClass('icon-resize-full');\n        }\n    });\n\n    $vegasContainer.find('#vegas-download').on('click', function(e) {\n        e.preventDefault();\n\n        var current = $vegasContainer.vegas('current');\n        var slide = slides[current];\n\n        var link = document.createElement('a');\n        link.download = slide.src.substring(slide.src.lastIndexOf('/') + 1);\n        link.href = slide.src;\n        link.target = \"_blank\";\n        link.click();\n    });\n\n    var vegasKeyup = function(e) {\n        e.preventDefault();\n\n        if (e.which == 37) { // left\n            $('#vegas-prev').trigger('click');\n        } else if (e.which == 39) { // right\n            $('#vegas-next').trigger('click');\n        } else if (e.which == 13 || e.which == 32) { // enter or space\n            $('#vegas-playpause').trigger('click');\n        } else if (e.which == 27){ // escape\n            $('#vegas-close').trigger('click');\n        }\n    };\n\n    // Swipe\n    var hammer = new Hammer($vegasContainer.get(0));\n    hammer.on('swipe', function(e) {\n        if (e.direction === Hammer.DIRECTION_LEFT) {\n            $('#vegas-next').trigger('click');\n        } else if (e.direction === Hammer.DIRECTION_RIGHT) {\n            $('#vegas-prev').trigger('click');\n        }\n    });\n\n    //\n    var $slideshow = $('.button.slideshow');\n\n    $slideshow.on('click', function(e) {\n        e.preventDefault();\n\n        slideshowStart(false);\n    });\n\n    $items.on('click', function(e) {\n        e.preventDefault();\n\n        slideshowStart($(this).index());\n    });\n\n    window.onpopstate = function(e) {\n        var hash = window.location.hash.substr(1);\n        if (hash.length > 0) {\n            // Hash set, starting slideshow with the hash as slide number -1\n            slideshowStart(hash - 1);\n        } else {\n            // No hash, closing slideshow\n            $('#vegas-close').trigger('click');\n        }\n    };\n    window.onpopstate();\n\n    function slideshowStart(slide) {\n        // Preparing container\n        $body.addClass('fixed');\n        $vegasContainer.addClass('active');\n\n        // Keyboard\n        $(document).on('keyup', vegasKeyup);\n\n        // Reverting history to the opening image\n        index = (slide === false) ? 0 : slide;\n        window.history.pushState({}, 'Image '+(index+1), '#'+(index+1));\n\n        // Starting vegas\n        $vegasContainer.vegas({\n            slides: slides,\n            cover: false,\n            delay: 4500,\n            transitionDuration: 2500,\n            transition: ['fade2'],\n            firstTransitionDuration: 250,\n            // animationDuration: 4000,\n            // animation: ['kenburns', 'kenburnsUp', 'kenburnsDown', 'kenburnsRight', 'kenburnsLeft', 'kenburnsUpLeft', 'kenburnsUpRight', 'kenburnsDownLeft', 'kenburnsDownRight']\n            timer: false,\n            autoplay: (slide === false) ? true : false,\n            slide: (slide === false) ? 0 : slide,\n            play: function (index, slideSettings) {\n                $vegasContainer.find('#vegas-playpause').removeClass('icon-play').addClass('icon-pause');\n            },\n            pause: function (index, slideSettings) {\n                $vegasContainer.find('#vegas-playpause').removeClass('icon-pause').addClass('icon-play');\n            },\n            walk: function (index, slideSettings) {\n                // Reverting history to the current image, only keeping one\n                window.history.replaceState({}, 'Image '+(index+1), '#'+(index+1));\n\n                // Triggering callback for tracking\n                if (typeof onSlideshowWalk === 'function') {\n                    onSlideshowWalk((index+1), slides[index]);\n                }\n            }\n        });\n\n        // Fixing height\n        setTimeout(function() {\n            $vegasContainer.css('height', 'auto'); // overrides height set by Vegas, as we prefer an implied size\n        }, 1);\n    }\n});\n\nfunction fullscreenAvailable(elem) {\n    if (elem.requestFullscreen) {\n        return true;\n    }\n    else if (elem.mozRequestFullScreen) {\n        return true;\n    }\n    else if (elem.webkitRequestFullScreen) {\n        return true;\n    }\n    else if (elem.msRequestFullscreen) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction fullscreenRequest(elem) {\n    if (elem.requestFullscreen) {\n        elem.requestFullscreen();\n    }\n    else if (elem.mozRequestFullScreen) {\n        elem.mozRequestFullScreen();\n    }\n    else if (elem.webkitRequestFullScreen) {\n        elem.webkitRequestFullScreen();\n    }\n    else if (elem.msRequestFullscreen) {\n        elem.msRequestFullscreen();\n    }\n}\n\nfunction fullscreenExit() {\n    if (document.exitFullscreen) {\n        document.exitFullscreen();\n    }\n    else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n    }\n    else if (document.webkitCancelFullScreen) {\n        document.webkitCancelFullScreen();\n    }\n    else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n    }\n}\n"]}